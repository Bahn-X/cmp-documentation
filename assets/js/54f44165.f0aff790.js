(self.webpackChunkcmp_documentation_website=self.webpackChunkcmp_documentation_website||[]).push([[152],{3905:function(e,t,n){"use strict";n.d(t,{Zo:function(){return c},kt:function(){return u}});var a=n(7294);function i(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function r(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function o(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?r(Object(n),!0).forEach((function(t){i(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):r(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function l(e,t){if(null==e)return{};var n,a,i=function(e,t){if(null==e)return{};var n,a,i={},r=Object.keys(e);for(a=0;a<r.length;a++)n=r[a],t.indexOf(n)>=0||(i[n]=e[n]);return i}(e,t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);for(a=0;a<r.length;a++)n=r[a],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}var s=a.createContext({}),d=function(e){var t=a.useContext(s),n=t;return e&&(n="function"==typeof e?e(t):o(o({},t),e)),n},c=function(e){var t=d(e.components);return a.createElement(s.Provider,{value:t},e.children)},p={inlineCode:"code",wrapper:function(e){var t=e.children;return a.createElement(a.Fragment,{},t)}},m=a.forwardRef((function(e,t){var n=e.components,i=e.mdxType,r=e.originalType,s=e.parentName,c=l(e,["components","mdxType","originalType","parentName"]),m=d(n),u=i,g=m["".concat(s,".").concat(u)]||m[u]||p[u]||r;return n?a.createElement(g,o(o({ref:t},c),{},{components:n})):a.createElement(g,o({ref:t},c))}));function u(e,t){var n=arguments,i=t&&t.mdxType;if("string"==typeof e||i){var r=n.length,o=new Array(r);o[0]=m;var l={};for(var s in t)hasOwnProperty.call(t,s)&&(l[s]=t[s]);l.originalType=e,l.mdxType="string"==typeof e?e:i,o[1]=l;for(var d=2;d<r;d++)o[d]=n[d];return a.createElement.apply(null,o)}return a.createElement.apply(null,n)}m.displayName="MDXCreateElement"},9170:function(e,t,n){"use strict";n.r(t),n.d(t,{frontMatter:function(){return o},metadata:function(){return l},toc:function(){return s},default:function(){return c}});var a=n(2122),i=n(9756),r=(n(7294),n(3905)),o={sidebar_position:1,id:"installation"},l={unversionedId:"getting-started/installation",id:"getting-started/installation",isDocsHomePage:!1,title:"Installation",description:"Add Tealium script tag to your website",source:"@site/docs/getting-started/installation.md",sourceDirName:"getting-started",slug:"/getting-started/installation",permalink:"/cmp-documentation/docs/getting-started/installation",version:"current",sidebarPosition:1,frontMatter:{sidebar_position:1,id:"installation"},sidebar:"defaultSidebar",previous:{title:"Introduction",permalink:"/cmp-documentation/docs/introduction"},next:{title:"Configuration",permalink:"/cmp-documentation/docs/getting-started/configuration"}},s=[{value:"Add Tealium script tag to your website",id:"add-tealium-script-tag-to-your-website",children:[]},{value:"Migrating existing tags",id:"migrating-existing-tags",children:[{value:"Tag configuration",id:"tag-configuration",children:[]}]},{value:"Add \u2018Manage consent\u2019 button",id:"add-manage-consent-button",children:[]}],d={toc:s};function c(e){var t=e.components,n=(0,i.Z)(e,["components"]);return(0,r.kt)("wrapper",(0,a.Z)({},d,n,{components:t,mdxType:"MDXLayout"}),(0,r.kt)("h2",{id:"add-tealium-script-tag-to-your-website"},"Add Tealium script tag to your website"),(0,r.kt)("div",{className:"admonition admonition-info alert alert--info"},(0,r.kt)("div",{parentName:"div",className:"admonition-heading"},(0,r.kt)("h5",{parentName:"div"},(0,r.kt)("span",{parentName:"h5",className:"admonition-icon"},(0,r.kt)("svg",{parentName:"span",xmlns:"http://www.w3.org/2000/svg",width:"14",height:"16",viewBox:"0 0 14 16"},(0,r.kt)("path",{parentName:"svg",fillRule:"evenodd",d:"M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"}))),"info")),(0,r.kt)("div",{parentName:"div",className:"admonition-content"},(0,r.kt)("p",{parentName:"div"},"Find the official installation guide ",(0,r.kt)("a",{parentName:"p",href:"https://docs.tealium.com/platforms/javascript/install/"},"here"),"."))),(0,r.kt)("p",null,"Adding the following snippet to a website will load Tealium and initialize its datalayer, the ",(0,r.kt)("inlineCode",{parentName:"p"},"utag_data")," object (UDO):"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-html"},"<body>\n  \x3c!-- Tealium universal data object --\x3e\n  <script type=\"text/javascript\">\n    var utag_data = {};\n  <\/script>\n\n  \x3c!-- Tealium tag --\x3e\n  <script type=\"text/javascript\">\n      (function(a,b,c,d){\n          a='https://tags.tiqcdn.com/utag/ACCOUNT/PROFILE/STAGE/utag.js';\n          b=document;c='script';d=b.createElement(c);d.src=a;d.type='text/java'+c;d.async=true;\n          a=b.getElementsByTagName(c)[0];a.parentNode.insertBefore(d,a);\n      })();\n  <\/script>\n</body>\n")),(0,r.kt)("div",{className:"admonition admonition-note alert alert--secondary"},(0,r.kt)("div",{parentName:"div",className:"admonition-heading"},(0,r.kt)("h5",{parentName:"div"},(0,r.kt)("span",{parentName:"h5",className:"admonition-icon"},(0,r.kt)("svg",{parentName:"span",xmlns:"http://www.w3.org/2000/svg",width:"14",height:"16",viewBox:"0 0 14 16"},(0,r.kt)("path",{parentName:"svg",fillRule:"evenodd",d:"M6.3 5.69a.942.942 0 0 1-.28-.7c0-.28.09-.52.28-.7.19-.18.42-.28.7-.28.28 0 .52.09.7.28.18.19.28.42.28.7 0 .28-.09.52-.28.7a1 1 0 0 1-.7.3c-.28 0-.52-.11-.7-.3zM8 7.99c-.02-.25-.11-.48-.31-.69-.2-.19-.42-.3-.69-.31H6c-.27.02-.48.13-.69.31-.2.2-.3.44-.31.69h1v3c.02.27.11.5.31.69.2.2.42.31.69.31h1c.27 0 .48-.11.69-.31.2-.19.3-.42.31-.69H8V7.98v.01zM7 2.3c-3.14 0-5.7 2.54-5.7 5.68 0 3.14 2.56 5.7 5.7 5.7s5.7-2.55 5.7-5.7c0-3.15-2.56-5.69-5.7-5.69v.01zM7 .98c3.86 0 7 3.14 7 7s-3.14 7-7 7-7-3.12-7-7 3.14-7 7-7z"}))),"note")),(0,r.kt)("div",{parentName:"div",className:"admonition-content"},(0,r.kt)("ul",{parentName:"div"},(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"ACCOUNT")," is the Tealium account used"),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"PROFILE")," is the currently used Tealium profile, i.e. the profile used to manage your website"),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"STAGE")," is the current stage being used: ",(0,r.kt)("inlineCode",{parentName:"li"},"prod"),", ",(0,r.kt)("inlineCode",{parentName:"li"},"qa")," or ",(0,r.kt)("inlineCode",{parentName:"li"},"dev"),(0,r.kt)("ul",{parentName:"li"},(0,r.kt)("li",{parentName:"ul"},"\u26a0\ufe0f ",(0,r.kt)("strong",{parentName:"li"},"be careful to select the proper stage for your deployment target")),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"dev")," can include experimental features and should only be used for development"),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"qa")," is meant as staging environment for testing"),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"prod")," is considered stable and should be used for production")))))),(0,r.kt)("h2",{id:"migrating-existing-tags"},"Migrating existing tags"),(0,r.kt)("p",null,"After adding the tag manager, existing scripts need to be migrated.\nInstead of adding them directly to the website, they will be loaded via Tealium:"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"add Tealium tag"),(0,r.kt)("li",{parentName:"ul"},"remove old tag(s)"),(0,r.kt)("li",{parentName:"ul"},"add (and configure) tag(s) to Tealium"),(0,r.kt)("li",{parentName:"ul"},"map tag(s) to a data processing service in the CMP"),(0,r.kt)("li",{parentName:"ul"},"tag manager will then manage tags based on user consent")),(0,r.kt)("div",{className:"admonition admonition-caution alert alert--warning"},(0,r.kt)("div",{parentName:"div",className:"admonition-heading"},(0,r.kt)("h5",{parentName:"div"},(0,r.kt)("span",{parentName:"h5",className:"admonition-icon"},(0,r.kt)("svg",{parentName:"span",xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 16 16"},(0,r.kt)("path",{parentName:"svg",fillRule:"evenodd",d:"M8.893 1.5c-.183-.31-.52-.5-.887-.5s-.703.19-.886.5L.138 13.499a.98.98 0 0 0 0 1.001c.193.31.53.501.886.501h13.964c.367 0 .704-.19.877-.5a1.03 1.03 0 0 0 .01-1.002L8.893 1.5zm.133 11.497H6.987v-2.003h2.039v2.003zm0-3.004H6.987V5.987h2.039v4.006z"}))),"caution")),(0,r.kt)("div",{parentName:"div",className:"admonition-content"},(0,r.kt)("p",{parentName:"div"},"As tags are loaded dynamically based on consent, you have to make sure your code still works without these external scripts, e.g. before accessing global variables added by them."),(0,r.kt)("p",{parentName:"div"},'By default, the page will reload after a consent change (removal/addition of a script tag) to make sure the page is in a "fresh" state.'))),(0,r.kt)("p",null,"There are some examples of services being migrated to Tealium and CMP under ",(0,r.kt)("inlineCode",{parentName:"p"},"Integration Guides")," in the sidebar."),(0,r.kt)("h3",{id:"tag-configuration"},"Tag configuration"),(0,r.kt)("p",null,"Depending on how script tags get loaded and configured, simply replacing the tags might not be enough.\nIdeally, the external script simply gets loaded by Tealium while being configured on the website (after making sure the script was properly loaded and executed).\nFor most other cases, there are predefined tags available, which can be configured in the tag manager directly."),(0,r.kt)("h2",{id:"add-manage-consent-button"},"Add \u2018Manage consent\u2019 button"),(0,r.kt)("p",null,"The user must have the chance to change/revoke their choices. To reopen the consent layer, call:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-javascript"},"window.DB_CMP.showConsentLayer(); // show the initial layer (what users see for the first time)\nwindow.DB_CMP.showSecondLayer(); // show the second layer with detailed options\n")),(0,r.kt)("p",null,"This should usually be placed next to footer links like \u2018Imprint\u2019, \u2018Privacy statement\u2019 etc."),(0,r.kt)("p",null,"Example:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-html"},'<footer>\n  <a href="/imprint">Imprint</a>\n  <a href="/privacy-statement">Privacy statement</a>\n  <button\n    type="button"\n    onclick="window.DB_CMP.showSecondLayer()"\n  >\n    Manage consent\n  </button>\n</footer>\n')),(0,r.kt)("p",null,"The location of the button might differ from website to website. For example on a mobile website, it might also be found in a hamburger menu. Next to the \u2018Imprint\u2019 link usually seems like a safe choice."),(0,r.kt)("p",null,"You might want to use the same styling as the links next to the button by resetting the button styles via CSS."))}c.isMDXComponent=!0}}]);